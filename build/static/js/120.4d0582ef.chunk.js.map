{"version":3,"file":"static/js/120.4d0582ef.chunk.js","mappings":"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","sources":["components/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from \"react\";\r\nimport axios from \"axios\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { ServiceContext } from \"../context/ServiceContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./AdminDashboard.css\";\r\n\r\nfunction AdminDashboard() {\r\n  const { user, logout } = useContext(AuthContext);\r\n  const { triggerRefresh } = useContext(ServiceContext);\r\n  const navigate = useNavigate();\r\n\r\n  const [services, setServices] = useState([]);\r\n  const [form, setForm] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    link: \"\",\r\n    image: null,\r\n    isActive: true,\r\n  });\r\n  const [editingId, setEditingId] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n\r\n  // ✅ Use environment variable for backend URL\r\n  const API_BASE_URL = import.meta.env.VITE_API_URL || \"http://localhost:5000\";\r\n\r\n  // ✅ Fetch services wrapped with useCallback to avoid dependency warnings\r\n  const fetchServices = useCallback(async () => {\r\n    try {\r\n      const res = await axios.get(`${API_BASE_URL}/api/services`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n      });\r\n      setServices(res.data.services);\r\n    } catch (err) {\r\n      setError(\"Failed to fetch services\");\r\n      console.error(err);\r\n    }\r\n  }, [API_BASE_URL]);\r\n\r\n  // ✅ useEffect calls fetchServices safely\r\n  useEffect(() => {\r\n    if (!user || user.role !== \"admin\") {\r\n      navigate(\"/login\");\r\n    } else {\r\n      fetchServices();\r\n    }\r\n  }, [user, navigate, fetchServices]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, type, value, files, checked } = e.target;\r\n    if (type === \"file\") {\r\n      setForm({ ...form, image: files[0] });\r\n    } else if (type === \"checkbox\") {\r\n      setForm({ ...form, isActive: checked });\r\n    } else {\r\n      setForm({ ...form, [name]: value });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"title\", form.title);\r\n    formData.append(\"description\", form.description);\r\n    if (form.link) formData.append(\"link\", form.link);\r\n    formData.append(\"isActive\", form.isActive);\r\n    if (form.image) formData.append(\"image\", form.image);\r\n\r\n    try {\r\n      if (editingId) {\r\n        await axios.put(`${API_BASE_URL}/api/services/${editingId}`, formData, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        });\r\n        setSuccess(\"✅ Service updated successfully!\");\r\n      } else {\r\n        await axios.post(`${API_BASE_URL}/api/services`, formData, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        });\r\n        setSuccess(\"✅ Service added successfully!\");\r\n      }\r\n\r\n      // Reset form and refresh data\r\n      setForm({\r\n        title: \"\",\r\n        description: \"\",\r\n        link: \"\",\r\n        image: null,\r\n        isActive: true,\r\n      });\r\n      setEditingId(null);\r\n      document.getElementById(\"image-input\").value = \"\";\r\n      fetchServices();\r\n      triggerRefresh();\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || \"Failed to save service\");\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (service) => {\r\n    setForm({\r\n      title: service.title,\r\n      description: service.description,\r\n      link: service.link || \"\",\r\n      image: null,\r\n      isActive: service.isActive,\r\n    });\r\n    setEditingId(service._id);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await axios.delete(`${API_BASE_URL}/api/services/${id}`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n      });\r\n      setSuccess(\"✅ Service deleted successfully!\");\r\n      fetchServices();\r\n      triggerRefresh();\r\n    } catch (err) {\r\n      setError(\"Failed to delete service\");\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"admin-dashboard\">\r\n      <div className=\"admin-header\">\r\n        <h1>Admin Dashboard</h1>\r\n        <button onClick={logout}>Logout</button>\r\n      </div>\r\n\r\n      <h2>{editingId ? \"Edit Service\" : \"Add Service\"}</h2>\r\n      {error && <p className=\"error\">{error}</p>}\r\n      {success && <p className=\"success\">{success}</p>}\r\n\r\n      <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\r\n        <label>\r\n          Title\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            value={form.title}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </label>\r\n\r\n        <label>\r\n          Description\r\n          <textarea\r\n            name=\"description\"\r\n            value={form.description}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </label>\r\n\r\n        <label>\r\n          Link\r\n          <input\r\n            type=\"text\"\r\n            name=\"link\"\r\n            value={form.link}\r\n            onChange={handleChange}\r\n            placeholder=\"Optional\"\r\n          />\r\n        </label>\r\n\r\n        <label>\r\n          Image\r\n          <input\r\n            id=\"image-input\"\r\n            type=\"file\"\r\n            name=\"image\"\r\n            accept=\"image/*\"\r\n            onChange={handleChange}\r\n            required={!editingId}\r\n          />\r\n        </label>\r\n\r\n        <label>\r\n          Active\r\n          <input\r\n            type=\"checkbox\"\r\n            name=\"isActive\"\r\n            checked={form.isActive}\r\n            onChange={handleChange}\r\n          />\r\n        </label>\r\n\r\n        <button type=\"submit\">{editingId ? \"Update\" : \"Add\"} Service</button>\r\n      </form>\r\n\r\n      <h2>Services List</h2>\r\n      <div className=\"services-list\">\r\n        {services.map((service) => (\r\n          <div key={service._id} className=\"service-item\">\r\n            {service.image && (\r\n              <img\r\n                src={`${API_BASE_URL}${service.image}`}\r\n                alt={service.title}\r\n              />\r\n            )}\r\n            <h3>{service.title}</h3>\r\n            <p>{service.description}</p>\r\n            {service.link && <p>Link: {service.link}</p>}\r\n            <p>Status: {service.isActive ? \"Active\" : \"Inactive\"}</p>\r\n            <button onClick={() => handleEdit(service)}>Edit</button>\r\n            <button onClick={() => handleDelete(service._id)}>Delete</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default AdminDashboard;\r\n"],"names":["user","logout","useContext","AuthContext","triggerRefresh","ServiceContext","navigate","useNavigate","services","setServices","useState","form","setForm","title","description","link","image","isActive","editingId","setEditingId","error","setError","success","setSuccess","API_BASE_URL","import","fetchServices","useCallback","async","res","axios","get","headers","Authorization","localStorage","getItem","data","err","console","useEffect","role","handleChange","e","name","type","value","files","checked","target","_jsxs","className","children","_jsx","onClick","onSubmit","preventDefault","formData","FormData","append","put","post","document","getElementById","_err$response","_err$response$data","response","encType","onChange","required","placeholder","id","accept","map","service","src","alt","_id","handleEdit","delete","handleDelete"],"sourceRoot":""}