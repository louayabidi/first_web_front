"use strict";(self.webpackChunkgypsum_app=self.webpackChunkgypsum_app||[]).push([[146],{2950:()=>{},3153:(e,s,a)=>{e.exports=a.p+"static/media/logo.0304732f71d2502ff0c5.png"},6146:(e,s,a)=>{a.r(s),a.d(s,{default:()=>l});var r=a(5043),i=a(1283),t=a(8729),o=(a(2950),a(3153)),n=a(579);const l=()=>{const[e,s]=(0,r.useState)(!0),[a,l]=(0,r.useState)({name:"",email:"",password:""}),[d,c]=(0,r.useState)(""),[p,u]=(0,r.useState)(!1),{login:m,signup:h}=(0,r.useContext)(t.c),g=(0,i.Zp)(),x=e=>{l({...a,[e.target.name]:e.target.value})};return(0,n.jsx)("div",{className:"auth-container",children:(0,n.jsxs)("div",{className:"auth-card",children:[(0,n.jsx)("img",{src:o,alt:"Logo",className:"auth-logo"}),(0,n.jsx)("h1",{children:e?"Se connecter":"S\u2019inscrire"}),(0,n.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),!a.email||!a.password||!e&&!a.name)return void c("\u274c Veuillez remplir tous les champs obligatoires.");if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email))if(a.password.length<6)c("\u274c Le mot de passe doit contenir au moins 6 caract\xe8res.");else{c("\ud83d\udd04 Traitement en cours...");try{e?(await m(a.email,a.password),g(a.email==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://first-web-back.onrender.com"}.REACT_APP_ADMIN_EMAIL?"/admin":"/")):(await h(a.name,a.email,a.password),s(!0)),l({name:"",email:"",password:""}),c("\u2705 Success")}catch(o){var i,t;const e=(null===(i=o.response)||void 0===i||null===(t=i.data)||void 0===t?void 0:t.error)||"Une erreur s\u2019est produite. Veuillez r\xe9essayer.";c("\u274c "+e)}}else c("\u274c Format d\u2019email invalide.")},children:[!e&&(0,n.jsx)("input",{type:"text",name:"name",placeholder:"Nom",value:a.name,onChange:x,required:!0}),(0,n.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:a.email,onChange:x,required:!0}),(0,n.jsxs)("div",{className:"password-field",children:[(0,n.jsx)("input",{type:p?"text":"password",name:"password",placeholder:"Mot de passe",value:a.password,onChange:x,required:!0}),(0,n.jsx)("span",{className:"toggle-password",onClick:()=>u(!p),title:p?"Hide Password":"Show Password",style:{cursor:"pointer"},children:p?"\ud83d\ude48":"\ud83d\udc41\ufe0f"})]}),e&&(0,n.jsx)("div",{className:"forgot-password",children:(0,n.jsx)("span",{onClick:()=>g("/forgot"),className:"toggle-link",style:{cursor:"pointer"},children:"Mot de passe oubli\xe9 ?"})}),(0,n.jsx)("button",{type:"submit",children:e?"Connexion":"S\u2019inscrire"})]}),d&&(0,n.jsx)("p",{className:"status-message",children:d}),(0,n.jsxs)("p",{children:[e?"Vous n\u2019avez pas de compte\u202f?":"Vous avez d\xe9j\xe0 un compte\u202f?"," ",(0,n.jsx)("span",{onClick:()=>s(!e),className:"toggle-link",style:{cursor:"pointer"},children:e?"S\u2019inscrire":"Connexion"})]})]})})}}}]);
//# sourceMappingURL=146.491f8b7c.chunk.js.map